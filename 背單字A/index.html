<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ç¬¬ä¸€é—œï½œä¸­è‹±é…å°æŒ‘æˆ°</title>

  <style>
    body{
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background:#f7f4ff; text-align:center; margin:0; padding:0;
    }
    h1{color:#5b4fd1; margin:12px 0 0;}
    .desc{font-size:14px;color:#555;margin:6px 12px 10px;line-height:1.5;}
    .controls{
      display:flex; gap:12px; justify-content:center; align-items:center;
      margin-bottom:10px; flex-wrap:wrap;
    }
    .timer{
      font-size:16px; background:white; padding:6px 12px; border-radius:8px;
      box-shadow:0 2px 6px rgba(0,0,0,.12);
    }
    button{
      border:none; background:#5b4fd1; color:white;
      padding:6px 14px; border-radius:8px; cursor:pointer;
      font-size:14px;
    }
    button:hover{background:#4a3fc0;}
    .grid{
      display:grid;
      grid-template-columns:repeat(5, 1fr);
      gap:12px;
      padding:16px;
      max-width:900px;
      margin:0 auto 20px;
    }
    .card{
      background:white; border-radius:12px; padding:10px 6px;
      box-shadow:0 3px 8px rgba(0,0,0,.12);
      font-size:18px; cursor:pointer;
      min-height:64px; display:flex; align-items:center; justify-content:center;
      user-select:none; transition:transform .2s;
    }
    .card:hover{transform:scale(1.05);}
    .card.back{color:#999;font-weight:bold;}
    .card.zh{color:#333;font-weight:600;}
    .card.en{color:#4b36d1;font-weight:700;}
    .card.matched{
      background:#e3ffe8;
      box-shadow:none;
      cursor:default;
      transform:none;
    }
    .finish{
      font-size:18px; font-weight:bold; color:#2f8f4e; margin-bottom:10px;
    }
  </style>
</head>

<body>

  <h1>ç¬¬ä¸€é—œï½œä¸­è‹±é…å°æŒ‘æˆ°</h1>
  <p class="desc">
    ç¿»é–‹è‹±æ–‡æœƒå”¸å‡ºå–®å­—ï¼Œå…¨éƒ¨é…å°å®Œæˆå°±åœæ­¢è¨ˆæ™‚ã€‚<br>
    æŒ‰ã€Œé‡æ–°æ´—ç‰Œã€å¯ä»¥ç«‹åˆ»é‡ä¾†ã€‚
  </p>

  <div class="controls">
    <div class="timer">æ™‚é–“ï¼š<span id="time">0</span> ç§’</div>
    <button id="resetBtn">ğŸ” é‡æ–°æ´—ç‰Œ</button>
  </div>

  <div id="finishMsg" class="finish" style="display:none;"></div>

  <div class="grid" id="grid"></div>

  <script>
    // ç¬¬ä¸€é—œå–®å­—
    const words = [
      { zh: "ç•«ç•«", en: "draw" },
      { zh: "ä¸Šè‰²", en: "paint" },
      { zh: "è·³èˆ", en: "dance" },
      { zh: "è®€",   en: "read" },
      { zh: "å”±æ­Œ", en: "sing" },
      { zh: "å¯«",   en: "write" },
      { zh: "å¹«å¿™", en: "help" },
      { zh: "é‡çš„", en: "heavy" },
      { zh: "æ»¿çš„", en: "full" },
      { zh: "ç©ºçš„", en: "empty" }
    ];

    const grid      = document.getElementById("grid");
    const timeEl    = document.getElementById("time");
    const resetBtn  = document.getElementById("resetBtn");
    const finishMsg = document.getElementById("finishMsg");

    let firstCard = null;
    let lockBoard = false;
    let matchCount = 0;

    let seconds = 0;
    let timerId = null;

    // æ´—ç‰Œ
    function shuffle(array){
      for(let i = array.length - 1; i > 0; i--){
        const j = Math.floor(Math.random() * (i + 1));
        const temp = array[i];
        array[i] = array[j];
        array[j] = temp;
      }
      return array;
    }

    // å»ºç«‹ 20 å¼µå¡ç‰‡
    function createCards(){
      grid.innerHTML = "";

      const cardsData = [];
      for(let i = 0; i < words.length; i++){
        cardsData.push({ id:i, type:"zh", text:words[i].zh });
        cardsData.push({ id:i, type:"en", text:words[i].en });
      }
      shuffle(cardsData);

      for(let i = 0; i < cardsData.length; i++){
        const data = cardsData[i];
        const card = document.createElement("div");
        card.className = "card back";
        card.dataset.id = data.id;
        card.dataset.type = data.type;
        card.dataset.text = data.text;
        card.textContent = "ï¼Ÿ";
        card.addEventListener("click", onCardClick);
        grid.appendChild(card);
      }
    }

    // é»å¡ç‰‡
    function onCardClick(e){
      if(lockBoard) return;

      const card = e.currentTarget;
      if(card.classList.contains("matched")) return;
      if(!card.classList.contains("back")) return;

      // ç¬¬ä¸€æ¬¡é» â†’ é–‹å§‹è¨ˆæ™‚
      if(timerId === null){
        startTimer();
      }

      flipCard(card);

      if(firstCard === null){
        firstCard = card;
      }else{
        if(firstCard === card) return;

        const sameId   = firstCard.dataset.id === card.dataset.id;
        const diffType = firstCard.dataset.type !== card.dataset.type;

        if(sameId && diffType){
          // é…å°æˆåŠŸ
          firstCard.classList.add("matched");
          card.classList.add("matched");
          matchCount++;

          firstCard = null;

          if(matchCount === words.length){
            stopTimer();
            finishMsg.style.display = "block";
            finishMsg.textContent = "æ­å–œéé—œï¼ç”¨æ™‚ " + seconds + " ç§’";
          }
        }else{
          // é…å°å¤±æ•—
          lockBoard = true;
          const c1 = firstCard;
          const c2 = card;
          setTimeout(function(){
            coverCard(c1);
            coverCard(c2);
            firstCard = null;
            lockBoard = false;
          }, 800);
        }
      }
    }

    // ç¿»é–‹
    function flipCard(card){
      card.classList.remove("back");
      const type = card.dataset.type;
      const text = card.dataset.text;

      if(type === "zh"){
        card.classList.add("zh");
        card.textContent = text;
      }else{
        card.classList.add("en");
        card.textContent = text;
        speak(text);
      }
    }

    // è“‹å›å»
    function coverCard(card){
      card.classList.remove("zh");
      card.classList.remove("en");
      card.classList.add("back");
      card.textContent = "ï¼Ÿ";
    }

    // è‹±æ–‡ç™¼éŸ³
    function speak(text){
      if(!window.speechSynthesis) return;
      var u = new SpeechSynthesisUtterance(text);
      u.lang = "en-US";
      window.speechSynthesis.speak(u);
    }

    // è¨ˆæ™‚å™¨
    function startTimer(){
      seconds = 0;
      timeEl.textContent = "0";
      timerId = setInterval(function(){
        seconds++;
        timeEl.textContent = String(seconds);
      }, 1000);
    }

    function stopTimer(){
      if(timerId !== null){
        clearInterval(timerId);
        timerId = null;
      }
    }

    // é‡ç½®éŠæˆ²
    function resetGame(){
      stopTimer();
      timeEl.textContent = "0";
      finishMsg.style.display = "none";
      firstCard = null;
      lockBoard = false;
      matchCount = 0;
      createCards();
    }

    resetBtn.addEventListener("click", resetGame);

    // ä¸€è¼‰å…¥å°±å»ºå¡ç‰‡
    resetGame();
  </script>

</body>
</html>
